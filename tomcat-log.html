<html>
	<head>
		<style type="text/css">
			body {
				margin: 0;
			}

			textarea {
				background: black;
				border: none;
				color: rgb(0, 180, 0);
				margin: 0;
				resize: none;
				outline: none;
				width: 100%;
				height: 100%;
			}
		</style>
		<script src="/socket.io/socket.io.js"></script>
	</head>

	<body>
		<textarea id="textarea" readonly autofocus></textarea>

		<script>
			var textarea = document.getElementById('textarea'),
				buffer = '',
				UPDATE_TIMEOUT = 50;

			io.connect('/')
				.on('message', function receive(data) {
					console.log('received new data. ', data.length, ' characters.');

					buffer += data;
				});

			setTimeout(update, UPDATE_TIMEOUT);

			function update() {
				if (!!buffer) {
					var scroll = textarea.scrollTop + textarea.offsetHeight >= textarea.scrollHeight;

					textarea.value += buffer;
					buffer = '';

					if (scroll) textarea.scrollTop = textarea.scrollHeight;
				}

				setTimeout(update, UPDATE_TIMEOUT);
			}
		</script>
	</body>
</html>
